import{R as y,a as A,r as E,o as S,c as O,d as I,b as R,e as L,f as P,g as T}from"./vendor.bebfeea1.js";const V=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}};V();var k=(e,t)=>{const r=e.__vccOpts||e;for(const[n,o]of t)r[n]=o;return r};const q={components:{RouterLink:y,RouterView:A}};function w(e,t,r,n,o,s){const i=E("RouterView");return S(),O(i)}var D=k(q,[["render",w],["__scopeId","data-v-48af449e"]]);const U="modulepreload",f={},b="/",a=function(t,r){return!r||r.length===0?t():Promise.all(r.map(n=>{if(n=`${b}${n}`,n in f)return;f[n]=!0;const o=n.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${s}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":U,o||(i.as="script",i.crossOrigin=""),i.href=n,document.head.appendChild(i),o)return new Promise((h,v)=>{i.addEventListener("load",h),i.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())},$=[{path:"/",name:"LoggedOutLayout",redirect:"home",meta:{requiresAuth:!1},component:()=>a(()=>import("./LoggedOutLayout.82054f39.js"),["assets/LoggedOutLayout.82054f39.js","assets/LoggedOutLayout.142b66b3.css","assets/vendor.bebfeea1.js"]),children:[{path:"home",name:"home",meta:{title:"Home",requiresAuth:!1},component:()=>a(()=>import("./homeView.00562709.js"),["assets/homeView.00562709.js","assets/homeView.a994d1ac.css","assets/vendor.bebfeea1.js"])},{path:"request",name:"request",meta:{title:"Request",requiresAuth:!0},component:()=>a(()=>import("./request.359a314d.js"),["assets/request.359a314d.js","assets/request.26ecda49.css","assets/vendor.bebfeea1.js","assets/index.15c82977.js"])},{path:"/account",name:"account",meta:{title:"Account",requiresAuth:!0},component:()=>a(()=>import("./account.cdc0b040.js"),["assets/account.cdc0b040.js","assets/index.15c82977.js","assets/vendor.bebfeea1.js"])},{path:"/signup",name:"signup",meta:{title:"Sign-Up",requiresAuth:!1},component:()=>a(()=>import("./signup.29373038.js"),["assets/signup.29373038.js","assets/signup.07d085f4.css","assets/index.15c82977.js","assets/vendor.bebfeea1.js"])}]},{path:"/auth",meta:{requiresAuth:!1},component:()=>a(()=>import("./CustomerLayout.cd55e36f.js"),["assets/CustomerLayout.cd55e36f.js","assets/vendor.bebfeea1.js"]),children:[{path:"/login",name:"auth.login",component:()=>a(()=>import("./Login.5113227c.js"),["assets/Login.5113227c.js","assets/Login.ec0ed0f6.css","assets/vendor.bebfeea1.js"]),meta:{visiterOnly:!0,requiresAuth:!1}}]}];var p={set(e,t,r){let n={data:t};r&&(n.expire=new Date().getTime()+r*1e3),localStorage.setItem(e,JSON.stringify(n))},get(e){const t=localStorage.getItem(e);if(t){const r=JSON.parse(t),n=r.expire;return n&&n<new Date().getTime()?(localStorage.removeItem(e),null):r.data}return null},remove(e){localStorage.removeItem(e)}};const C=async()=>await fetch("/api/profile").then(e=>e.json()),N=async e=>await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>t.json());var d={info:C,login:N},c=I("user",{state:()=>({userInfo:{}}),actions:{async getUserInfo(){const e=await d.info();this.userInfo=e.result}}});const x=[{path:"/customerManagement",name:"Customer Management",meta:{title:"Customer",permissions:["director"]},component:()=>a(()=>import("./customerView.070c2aa1.js"),["assets/customerView.070c2aa1.js","assets/superfrogView.833ac95a.css","assets/index.15c82977.js","assets/vendor.bebfeea1.js"])},{path:"/teamManagement",name:"Team Management",meta:{title:"Team",permissions:["director"]},component:()=>a(()=>import("./teamView.6382fcc1.js"),["assets/teamView.6382fcc1.js","assets/teamView.2f56ce3e.css","assets/index.15c82977.js","assets/vendor.bebfeea1.js"])},{path:"/approval",name:"Approval",meta:{title:"Approval",permissions:["director"]},component:()=>a(()=>import("./approvalView.ef65911e.js"),["assets/approvalView.ef65911e.js","assets/superfrogView.833ac95a.css","assets/vendor.bebfeea1.js"])},{path:"/superfrogManagement",name:"Superfrog Approval",meta:{title:"SuperfrogApproval",permissions:["director"]},component:()=>a(()=>import("./superfrogView.57ef25ad.js"),["assets/superfrogView.57ef25ad.js","assets/superfrogView.833ac95a.css","assets/index.15c82977.js","assets/vendor.bebfeea1.js"])}];function g(e){var n;const r=(n=c().userInfo)==null?void 0:n.permissions;r&&x.forEach(o=>{var s;(s=o.meta.permissions)!=null&&s.every(i=>r.includes(i))&&(e.addRoute("LoggedOutLayout",o),e.removeRoute("signup"))})}async function M(e){var o;const{result:{token:t}}=await d.login(e);p.set("login_token",{token:t},600),await c().getUserInfo(),g(u);const n=(o=l.cacheUtils.get("requested_page_prior_login"))!=null?o:"home";u.push({name:n})}function j(){p.remove("login_token");const e=c();e.userInfo=null,u.push("/")}var J=Object.freeze(Object.defineProperty({__proto__:null,login:M,logout:j},Symbol.toStringTag,{value:"Module"})),l={cacheUtils:p,userLoginUtils:J};function B(e){e.beforeEach((t,r)=>{if(t.meta.requiresAuth&&!H(t))return{name:"auth.login"};if(W(t))return r;z()})}function H(e){const r=!!m();return r||l.cacheUtils.set("requested_page_prior_login",e.name),r}function W(e){let t=m();return e.meta.visitorOnly&&t}function m(){var e;return(e=l.cacheUtils.get("login_token"))==null?void 0:e.token}function z(){const e=c();m()&&e.getUserInfo()}const u=R({history:L(),routes:[...$]});async function F(e){var t;(t=l.cacheUtils.get("login_token"))!=null&&t.token&&(await c().getUserInfo(),g(u)),B(u),e.use(u)}function G(e){e.use(P())}function K(e){G(e)}const _=T(D);K(_);F(_);async function Q(){await u.isReady(),_.mount("#app")}Q();export{k as _,l as u};
